(function(e){if(e.BX.indexedDB)return;var n=e.BX;n.indexedDB=function(n){var t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB;e.IDBTransaction=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction;e.IDBKeyRange=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange;if(typeof t!="undefined"&&typeof e.IDBTransaction!="undefined"&&typeof e.IDBKeyRange!="undefined"){var o=t.open(n.name,parseInt(n.version));o.onsuccess=function(e){if(typeof n.callback=="function"){n.callback(this.result)}};o.onupgradeneeded=function(e){if(typeof n.oScheme!="undefined"){var t=e.target.result;var o=null;var r=null;var c=null;var i=n.oScheme.length;for(var f=0;f<i;f++){o=n.oScheme[f];if(typeof o=="object"&&!t.objectStoreNames.contains(o.name)){r=t.createObjectStore(o.name,{keyPath:typeof o.keyPath!="undefined"&&o.keyPath,autoIncrement:typeof o.autoIncrement!="undefined"&&!!o.autoIncrement});if(typeof o.indexes!="undefined"){for(var a=0;a<o.indexes.length;a++){r.createIndex(o.indexes[a].name,o.indexes[a].keyPath,{unique:!!o.indexes[a].unique})}}}}var u=null;length=t.objectStoreNames.length;for(var f=0;f<length;f++){u=false;for(var a=0;a<i;a++){o=n.oScheme[a];if(o.name==t.objectStoreNames[f]){u=true;continue}}if(!u){t.deleteObjectStore(t.objectStoreNames[f])}}}}}};n.indexedDB.checkDbObject=function(e){return typeof e=="object"};n.indexedDB.getObjectStore=function(e,t,o){if(!n.indexedDB.checkDbObject(e)){return}try{var r=e.transaction(t,o);r.onsuccess=function(){};r.onerror=function(){};return r.objectStore(t)}catch(c){return false}};n.indexedDB.addValue=function(e,t,o,r,c){var i=null;try{i=n.indexedDB.getObjectStore(e,t,"readwrite").add(o,r)}catch(f){}i.onerror=function(e){if(typeof c.error=="function"){c.error(e)}};i.onsuccess=function(e){if(typeof c.callback=="function"){c.callback(e)}}};n.indexedDB.updateValue=function(e,t,o,r,c){var i=n.indexedDB.getObjectStore(e,t,"readwrite");var f=null;try{if(r){f=i.put(o,r)}else{f=i.put(o)}}catch(a){}f.onerror=function(e){if(typeof c!="undefined"&&typeof c.error=="function"){c.error(e)}};f.onsuccess=function(e){if(typeof c!="undefined"&&typeof c.callback=="function"){c.callback(e)}}};n.indexedDB.deleteValue=function(e,t,o,r){var c=n.indexedDB.getObjectStore(e,t,"readwrite")["delete"](o);c.onerror=function(e){if(typeof r!="undefined"&&typeof r.error=="function"){r.error(e)}};c.onsuccess=function(e){if(typeof r!="undefined"&&typeof r.callback=="function"){r.callback(e)}}};n.indexedDB.deleteValueByIndex=function(e,t,o,r,c){var i=null;try{i=n.indexedDB.getObjectStore(e,t,"readwrite").index(o).getKey(r)}catch(f){}i.onsuccess=function(o){var r=null;try{r=n.indexedDB.getObjectStore(e,t,"readwrite")["delete"](o.target.result);r.onsuccess=function(e){if(typeof c!="undefined"&&typeof c.callback=="function"){c.callback(e)}};r.onerror=function(e){if(typeof c!="undefined"&&typeof c.error=="function"){c.error(e)}}}catch(i){}};i.onerror=function(e){if(typeof c.error=="function"){c.error(e)}}};n.indexedDB.getValue=function(e,t,o,r){var c=n.indexedDB.getObjectStore(e,t,"readonly").get(o);c.onerror=function(e){if(typeof r.error=="function"){r.error(e)}};c.onsuccess=function(e){if(typeof r.callback=="function"){r.callback(e.target.result)}}};n.indexedDB.getValueByIndex=function(e,t,o,r,c){var i=n.indexedDB.getObjectStore(e,t,"readonly").index(o).get(r);i.onerror=function(e){if(typeof c.error=="function"){c.error(e)}};i.onsuccess=function(e){if(typeof c.callback=="function"){c.callback(e.target.result)}}};n.indexedDB.openCursor=function(t,o,r,c){var i=null;if(typeof r.lower!="undefined"){if(typeof r.upper!="undefined"){i=e.IDBKeyRange.bound(r.lower,r.upper,!!r.lowerOpen,!!r.upperOpen)}else{i=e.IDBKeyRange.lowerBound(r.lower,!!r.lowerOpen)}}else if(typeof r.upper!="undefined"){i=e.IDBKeyRange.upperBound(r.upper,!!r.upperOpen)}var f=n.indexedDB.getObjectStore(t,o,"readonly").openCursor(i);f.onerror=function(e){if(typeof c.error=="function"){c.error(e)}};f.onsuccess=function(e){if(typeof c.callback=="function"){var n=e.target.result;if(n){c.callback(n.value);n["continue"]()}}}};n.indexedDB.count=function(e,t,o){var r=n.indexedDB.getObjectStore(e,t,"readonly").count();r.onerror=function(e){if(typeof o.error=="function"){o.error(e)}};r.onsuccess=function(){if(typeof o.callback=="function"){o.callback(r.result)}}};n.indexedDB.deleteDatabase=function(n,t){var o=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB;o.deleteDatabase(n)}})(window);
//# sourceMappingURL=core_db_indexeddb.map.js